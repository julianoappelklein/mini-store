<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Store - Direct Window Injection Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            text-align: center;
        }
        .counter {
            font-size: 3em;
            margin: 20px 0;
            color: #333;
        }
        button {
            font-size: 1.2em;
            padding: 10px 20px;
            margin: 0 10px;
            border: 2px solid #007acc;
            background: #007acc;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        button:hover {
            background: #005999;
            border-color: #005999;
        }
        .code-example {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            text-align: left;
            margin: 20px 0;
        }
        .code-example code {
            background: #e0e0e0;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .highlight {
            background: #ffffaa;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Mini Store - Direct Window Injection</h1>
    
    <div class="code-example">
        <h3>üéØ What's Different?</h3>
        <p>This example uses <code>mini-store.browser.js</code> which directly injects <span class="highlight">MiniStore</span> into the window object.</p>
        <p><strong>No namespace needed!</strong> Just use <code>MiniStore</code> directly instead of <code>MiniStore.MiniStore</code></p>
    </div>
    
    <div class="counter" id="counter">0</div>
    
    <button id="increment">+</button>
    <button id="decrement">-</button>
    <button id="reset">Reset</button>
    
    <div class="code-example">
        <h3>üìù Usage Comparison:</h3>
        <p><strong>Regular UMD build:</strong></p>
        <code>const { MiniStore } = MiniStore;</code>
        
        <p><strong>Direct injection build:</strong></p>
        <code>// MiniStore is already available globally!</code><br>
        <code>const store = new MiniStore({ count: 0 });</code>
    </div>

    <!-- Direct window injection - no namespace needed! -->
    <script src="../dist/mini-store.browser.js"></script>
    <script>
        // MiniStore is now directly available on window!
        console.log('MiniStore available:', typeof MiniStore !== 'undefined');
        console.log('MiniStore constructor:', MiniStore);
        
        // Create store with initial state - no MiniStore.MiniStore needed!
        const store = new MiniStore({ 
            count: 0,
            lastUpdated: new Date().toISOString()
        });
        
        // Get DOM elements
        const counterEl = document.getElementById('counter');
        const incrementBtn = document.getElementById('increment');
        const decrementBtn = document.getElementById('decrement');
        const resetBtn = document.getElementById('reset');
        
        // Subscribe to count changes and update the UI
        store.subscribe(
            (count) => {
                counterEl.textContent = count;
                console.log('Counter updated to:', count);
                
                // Disable decrement button when count is 0
                decrementBtn.disabled = count <= 0;
            },
            { 
                selector: state => state.count,
                emitOnSubscribe: true 
            }
        );
        
        // Button event handlers
        incrementBtn.onclick = () => {
            store.update(state => ({
                count: state.count + 1,
                lastUpdated: new Date().toISOString()
            }));
        };
        
        decrementBtn.onclick = () => {
            store.update(state => ({
                count: Math.max(0, state.count - 1),
                lastUpdated: new Date().toISOString()
            }));
        };
        
        resetBtn.onclick = () => {
            store.update({
                count: 0,
                lastUpdated: new Date().toISOString()
            });
        };
        
        console.log('‚úÖ Direct window injection example loaded!');
        console.log('Current state:', store.state);
    </script>
</body>
</html>
